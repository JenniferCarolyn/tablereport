<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tabla Expandible</title>
  <style>
    /* Tooltip */
    #tooltip {
        position: absolute;
        width: auto;
        height: auto;
        padding: 5px;
        background-color: white;
        border-radius: 4px;
        box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
        pointer-events: none;
        font-family: public sans;
        font-size: 20px;
        z-index: 2;
    }

    #tooltip.hidden {
        display: none;
    }

    #tooltip p {
        margin: 0;
        font-family: public sans;
        font-size: 20px;
        line-height: 15px;
    }

    /* Estilo de la tabla */
    .reportTable {
        font-family: public sans;
        font-size: 25px;
        border: 1px solid #CCCCCC;
        border-collapse: collapse;
        border-spacing: 3px;
        width: 100%;
    }

    .reportTable th {
        background-color: #154c79;
        color: #ffffff;
        border: 1px solid #CCCCCC;
        border-bottom: 1px solid #CCCCCC !important;
        padding: 5px;
        text-align: center;
        font-size: 20px;
    }

    .reportTable td {
        background-color: #E4E4E5;
        color: #000000;
        vertical-align: top;
        padding: 5px;
        border: 1px solid #CCCCCC;
        font-size: 24px;
        white-space: pre-line;
        word-wrap: break-word;
    }

    .reportTable td:not(.marca-col) {
        max-height: 3em;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .reportTable td:not(.marca-col).expanded {
        white-space: normal;
        max-height: none;
        word-wrap: break-word;
    }

    .group-header {
        background-color: #D0D0D0;
        font-weight: bold;
        cursor: pointer;
    }

    .group-content {
        display: none;
    }

    .group-content.expanded {
        display: table-row-group;
    }

    .left { text-align: left; }
    .right { text-align: right !important; }
    .indent { padding-left: 15px; }

    .subtotal {
        font-style: italic;
        font-weight: bold;
        background: #D3D3D3;
    }

    .total {
        border-top: 2px solid #000000 !important;
        font-weight: bold !important;
    }

    .total.transposed {
        border-top: 0px !important;
        background: #D3D3D3;
    }

    #toggle-all {
        margin: 10px 0;
        padding: 8px 16px;
        font-size: 16px;
        background-color: #154c79;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #toggle-all:hover {
        background-color: #103a5d;
    }
  </style>
</head>
<body>

<button id="toggle-all">Expandir Todo</button>

<table class="reportTable">
  <thead>
    <tr>
      <th>Marca</th>
      <th>Descripción</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody class="group-header">
    <tr><td class="marca-col">Nike</td><td colspan="2">Grupo Nike</td></tr>
  </tbody>
  <tbody class="group-content">
    <tr>
      <td class="marca-col">Nike</td>
      <td>Producto muy largo con muchos detalles que deberían estar colapsados hasta que el usuario quiera leer más...</td>
      <td>$100</td>
    </tr>
    <tr>
      <td class="marca-col">Nike</td>
      <td>Otro producto con descripción larga...</td>
      <td>$120</td>
    </tr>
  </tbody>

  <tbody class="group-header">
    <tr><td class="marca-col">Adidas</td><td colspan="2">Grupo Adidas</td></tr>
  </tbody>
  <tbody class="group-content">
    <tr>
      <td class="marca-col">Adidas</td>
      <td>Texto expandible para este artículo de Adidas con mucha información relevante.</td>
      <td>$110</td>
    </tr>
  </tbody>
</table>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const toggleButton = document.getElementById("toggle-all");
    let expanded = false;

    toggleButton.addEventListener("click", function () {
        const cells = document.querySelectorAll(".reportTable td:not(.marca-col)");
        const groups = document.querySelectorAll(".group-content");

        cells.forEach(cell => {
            cell.classList.toggle("expanded", !expanded);
        });

        groups.forEach(group => {
            group.classList.toggle("expanded", !expanded);
        });

        expanded = !expanded;
        toggleButton.textContent = expanded ? "Contraer Todo" : "Expandir Todo";
    });
});
</script>

</body>
</html>
